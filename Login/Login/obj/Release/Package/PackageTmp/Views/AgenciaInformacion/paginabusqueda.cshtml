
@{
    ViewBag.Title = "Resultados de Busqueda";
    Layout = "~/Views/Shared/_LayoutAgencia.cshtml";
}

<!DOCTYPE html>

<html>
<head>

    @*fontawesome*@
    @*<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">*@
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/2f08016506.js" crossorigin="anonymous"></script>
    @*estilos*@
    <link href="~/Content/EstilosPopUp.css" rel="stylesheet" />
    <link href="~/Content/StylePagBusqueda.css" rel="stylesheet" />


    @*Titulo de la pagina*@
    <title>Resultados de Busqueda</title>
    @*script para guardar o imprimir grafico*@
    <style type="text/css" media="print">

        @@media print {
            /*@@page {
                size: landscape !important;
            }

            @@page {
                size: A4 landscape !important;
            }*/
            .container {
                width: 100%;
            }

            iframe {
                /*zoom: 90%;*/
                transform: scale(.9,.9) translate(1px,5px) !important;
                /* margin: -40px 0px 0px -40px !important;
                margin-right:5in !important;
                transform: scale(.9,.9) !important;
                -ms-transform: scale(.9,.9) !important;
                -webkit-transform: scale(.9,.9) !important;*/
            }
            /*body {
                 page-break-before:always;
                width: 100%;
                height: 100%;
                -webkit-transform: rotate(-90deg) scale(.68,.68);
                    -moz-transform: rotate(-90deg) scale(.58,.58);
                zoom: 200%
            }*/
            #hide {
                display: none !important;
            }

            #header, #nav, .noprint {
                display: none !important;
            }
        }
    </style>

    <script>
        function mostrador(seccion) {
            var arreglo = [
                '#PBuno',
                '#PBdos'
               
            ];
            //arreglo.forEach
            jQuery.each(arreglo, function (i, val) {
                $(val).hide();
            });
            $(seccion).show();

        }
    </script>

</head>
<body>

    <div class="container-fluid" style="background-color: #C6CCDC; height:auto">
        <div class="row justify-content-center" style="padding-top:3%; padding-bottom:1%;">
            <div class="col-10 col-md-3" style="padding-left:6%;">
                <!--Buscador -->
                <form action="~/AgenciaInformacion/PaginaBusqueda" method="get">
                    <input type="text" id="id" name="id" placeholder="Busqueda de palabras claves" style="padding: 6px; border: none; border-top-left-radius: 3px; border-bottom-left-radius: 3px;">
                    <button id="search-button" type="submit" value="Submit" class="btn btn-danger">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
                @*<div class="input-group ">
                    <div class="form-outline">
                        <form action="~/AgenciaInformacion/PaginaBusqueda" method="get" style="width:100%;">
                            <input class="buscador typeahead form-control" type="text" id="id" name="id" placeholder="Busqueda de palabras claves">
                        </form>
                    </div>
                    <button id="search-button" type="submit" value="Submit" class="btn btn-danger">
                        <i class="fas fa-search"></i>
                    </button>
                </div>*@
            </div>
            <div class="col-10 col-md-3 text-left">
                <h4 style="color:black; font-size:1.2rem;"><b>¡Explora, busca y encuentra!</b></h4>
                <p>todo nuestro universo de datos</p>
            </div>
            <div class="col-8 mb-3 col-md-2  offset-1">
                <img class="img-fluid" src="~/Content/img/negro-rojo-trans - copia.png" alt="" />
            </div>
        </div>
    </div>

    <div class="offcanvas offcanvas-start w-50 d-md-none" tabindex="-1" id="offcanvas" data-bs-keyboard="false" data-bs-backdrop="true" style="overflow:scroll;">
        <style>
            .cancel {
                display: block;
                position: absolute;
                top: 3px;
                right: 2px;
                background: rgb(245,245,245);
                color: black;
                height: 30px;
                width: 35px;
                font-size: 30px;
                text-decoration: none;
                text-align: center;
                font-weight: bold;
            }
        </style>
        <a href="#" class="cancel" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" data-bs-backdrop="false">×</a>

        <div class="tags col-md-6 col-sm-12 ml-5" style="margin-left:10px;">
            @*Este script es para hacer el filtro de la tabla*@
            <script>
                //Funcion para filtrar Territorios a partir de Escala
                $(document).ready(function () {
                    //Se activa al hacer click sobre cualquier objeto con class "escala"
                    $(".escala").on("click", function () {
                        //se guarda el contenido de la escala seleccionado, por ejemplo "pais"
                        var escalaTerritorial = $(this).val().toLowerCase();
                        //Se guarda el estado del checkbox
                        //true si esta marcado y false de lo contrario
                        var checkTerritorio = $(this).prop("checked");

                        $(".territorio").each(function () {

                            var checkBox = $(this).find("label").find("input").val().toLowerCase();
                            if (checkTerritorio) {
                                if (!checkBox.includes(escalaTerritorial))
                                    $(this).hide();
                                else
                                    $(this).show();
                            }
                            else {
                                $(this).show();
                            }
                        });
                    });
                });
                var contador = 0;
                $(document).ready(function () {
                    $(".name").on("click", function () {
                        contador = 0;
                        name_list = []
                        $("#myTable tr").hide()
                        var flag = 1
                        $("input:checkbox[name=name]:checked").each(function () {
                            flag = 0;
                            var value = $(this).val().toLowerCase();
                            $("#myTable tr").filter(function () {
                                if ($(this).text().toLowerCase().indexOf(value) > -1) {
                                    $(this).show();
                                    contador++;
                                }

                            });
                            $("#contar").text(contador + " Resultados");
                        });
                        if (flag == 1) {
                            $("#myTable tr").show();
                            $("#contar").text($("#myTable tr").length + " Resultados");
                        }
                    });

                });
            </script>

            @*<h4 class="mt-3 dropdown-header">COLECCIÓN</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:250px; overflow:hidden;">

                @foreach (var item1 in ViewBag.Sector)
                {
                    <div>
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name" name="name" value="@item1"> @item1</label>
                    </div>
                }
            </div>*@
            @*<h4 class="dropdown-header">SECTOR</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:100px; overflow:hidden;">
                @foreach (var item2 in ViewBag.Industria)
                {
                    <div>
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name" name="name" value="@item2"> @item2</label>
                    </div>}
            </div>*@
            <h4 class="dropdown-header">TEMA</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:100px; overflow:hidden;">
                @foreach (var item3 in ViewBag.Producto)
                {
                    <div>
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name" name="name" value="@item3"> @item3</label>
                    </div>}
            </div>
            <h4 class="mt-3 dropdown-header">TIPO DE PRODUCTO</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:120px; overflow:hidden;">
                @foreach (var item4 in ViewBag.TipoGrafico)
                {
                    switch (item4)
                    {
                        case "Informe Interactivo":
                            <div>
                                <label><input id="@item4.Replace(" ","_")" type="checkbox" class="name" name="name" value="@item4"> @item4</label>
                            </div> break;
                        case "Reporte 360°":
                            <div>
                                <label><input id="@item4.Replace(" ","_").Replace("°","")" type="checkbox" class="name" name="name" value="@item4"> @item4</label>
                            </div> break;
                        default:
                            <div>
                                <label><input type="checkbox" class="name" name="name" value="@item4"> @item4</label>
                            </div>break;
                    }
                 }
            </div>
            <h4 class="dropdown-header">ESCALA</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:250px; overflow:hidden;">
                @foreach (var item5 in ViewBag.Escala)
                {
                    <div>
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name escala" name="name" value="@item5.Split('-')[0]"> @item5.Split('-')[0]</label>
                    </div>
                }
            </div>
            <h4 class="dropdown-header">TERRITORIO</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:250px; overflow:hidden;">
                @foreach (var item6 in ViewBag.Paises)
                {
                    <div class="territorio">
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name" name="name" value="@item6.Split('-')[0]"> @item6.Split('-')[0]</label>
                    </div>}
            </div>

            @*<h4 class="dropdown-header">PARÁMETRO</h4>
            <div class="side mb-5" style="overflow:scroll; max-height:100px; overflow:hidden;">
                @foreach (var item7 in ViewBag.Parametro)
                {
                    <div>
                        <label style="margin-bottom:0 !important;"><input type="checkbox" class="name" name="name" value="@item7"> @item7</label>
                    </div>}
            </div>*@

        </div>

        <!--Botones de filtros en tamaño movil  -->
        <button class="btn btn-success" onClick="ActivarCasilla(this), LimpiarTodo();">Limpiar Filtros</button>
        <button class="btn btn-primary" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" data-bs-backdrop="false">Aplicar Filtros</button>
        <script type="text/javascript">
            function ActivarCasilla(casilla) {
                miscasillas = document.getElementsByTagName('input'); //Rescatamos controles tipo Input
                $("#myTable tr").show();
                $("#contar").text($("#myTable tr").length + " Resultados");
                for (i = 0; i < miscasillas.length; i++) //Ejecutamos y recorremos los controles
                {
                    if (miscasillas[i].type == "checkbox") // Ejecutamos si es una casilla de verificacion
                    {
                        miscasillas[i].checked = false;  //casilla.checked; // Si el input es CheckBox se aplica la funcion ActivarCasilla
                    }
                }
            }
        </script>
    </div>
    @***************comienzo de prueba de filtros****************************@
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <!--boton de menu lateral en movil-->
                <button class="button btn float-end d-sm-flex d-md-none" data-bs-toggle="offcanvas" data-bs-target="#offcanvas" role="button">
                    <i class="fas fa-filter" data-bs-toggle="offcanvas" data-bs-target="#offcanvas">Filtros</i>
                </button>
            </div>
        </div>
    </div>
    @*Estilos de la prueba de sidebar con dropdown*@
    <style>


        a:hover, a:focus {
            text-decoration: none !important;
            outline: none !important;
            -webkit-box-shadow: none;
            box-shadow: none;
        }

        .ftco-section {
            padding: 7em 0;
        }

        .ftco-no-pt {
            padding-top: 0;
        }

        .ftco-no-pb {
            padding-bottom: 0;
        }

        .heading-section {
            font-size: 28px;
            color: #000;
        }

            .heading-section small {
                font-size: 18px;
            }

        .wrapper {
            width: 100%;
        }

        #sidebar {
            min-width: 60%;
            max-width: 270px;
            color: #fff;
            -webkit-transition: all 0.3s;
            -o-transition: all 0.3s;
            transition: all 0.3s;
            position: relative;
            z-index: 0;
            /*border-left: 1px solid rgba(0, 0, 0, 0.05);*/
        }

            #sidebar .h6 {
                color: #fff;
            }

            #sidebar.active {
                margin-left: -270px;
            }

            #sidebar ul.components {
                padding: 0;
            }

            #sidebar ul li {
                font-size: 14px;
            }

                #sidebar ul li > ul {
                    margin-left: 10px;
                }

                    #sidebar ul li > ul li {
                        font-size: 13px;
                    }

                        #sidebar ul li > ul li a {
                            border-bottom: 1px solid transparent;
                        }

                            #sidebar ul li > ul li a span {
                                color: #000;
                            }

                #sidebar ul li a {
                    padding: 10px 0;
                    display: block;
                    color: black;
                    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
                }

                    #sidebar ul li a span {
                        color: #fff;
                    }

                #sidebar ul li.active > a {
                    background: transparent;
                    color: #fc7fb2;
                }

        @@media (max-width: 767.98px) {
            #sidebar {
                min-width: 60%;
                max-width: 180px;
                border-left: none;
            }
        }

        #sidebar .custom-menu {
            display: inline-block;
            top: 20px;
            right: 0;
            margin-right: -20px;
            -webkit-transition: 0.3s;
            -o-transition: 0.3s;
            transition: 0.3s;
        }

        @@media (prefers-reduced-motion: reduce) {
            #sidebar .custom-menu {
                -webkit-transition: none;
                -o-transition: none;
                transition: none;
            }
        }

        #sidebar .custom-menu .btn.btn-primary:after {
            z-index: -1;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            content: '';
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
            background: #fc7fb2;
            border-radius: 10px;
        }

        #sidebar .custom-menu .btn.btn-primary:hover, #sidebar .custom-menu .btn.btn-primary:focus {
            background: transparent !important;
            border-color: transparent !important;
        }

        a[data-toggle="collapse"] {
            position: relative;
        }

        .dropdown-toggle::after {
            display: block;
            position: absolute;
            top: 50%;
            right: 0;
            -webkit-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            transform: translateY(-50%);
        }
    </style>
    @*seccion de graficos*@
    <div id="PBdos" style="display:none;">

    </div>
    @********************test nuevo dise;o de pagina busqueda*****************************************@
    <main class="container-fluid pb-3 overflow-auto">
        <div class="row justify-content-between" id="PBuno">
            <div class="col-sm-3">
                <div class=" border rounded-3 p-1  d-none d-sm-none d-md-block" style="background-color: #DBDDE9;">
                    <nav id="sidebar">

                        <div class="p-4" style="border:none !important;">
                            <h4 style="color:#000;" class="text-left">FILTROS</h4>
                            @*Boton para borrar los filtros*@
                            <label class="btn btn-danger btn-sm text-center mb-3" style=" font-size: 14px; margin: 0px;max-width: 130px; min-width:120px; cursor: pointer;">
                                <input style="display:none;" type="checkbox" onClick="ActivarCasilla(this), LimpiarTodo();" /> Borrar filtros
                            </label>
                            <ul class="list-unstyled mb-5 ">
                                @*<li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration:none; " href="#pageSubmenu1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle  flex-shrink-1 ">COLECCIÓN</a>

                                    <ul class="collapse list-unstyled" id="pageSubmenu1">
                                        @foreach (var item1 in ViewBag.Sector)
                                        {
                                            <label style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer;"><input type="checkbox" class="name" name="name" value="@item1"> @item1</li>
                                            </label>
                                        }

                                    </ul>
                                </li>*@
                                @*<li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">SECTOR</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu2">
                                        @foreach (var item1 in ViewBag.Industria)
                                        {
                                            <label style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer; width:100%; "><input type="checkbox" class="name" name="name" value="@item1"> @item1</li>
                                            </label>
                                        }

                                    </ul>
                                </li>*@
                                <li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">TEMA</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu3">
                                        @foreach (var item1 in ViewBag.Producto)
                                        {
                                            <label style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer; "><input type="checkbox" class="name" name="name" value="@item1"> @item1</li>
                                            </label>
                                        }

                                    </ul>
                                </li>
                                <li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu4" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">TIPO DE GRÁFICO</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu4">
                                        @foreach (var item4 in ViewBag.TipoGrafico)
                                        {
                                            switch (item4)
                                            {
                                                case "Informe Interactivo":
                                                    <label style="width: 100%;">
                                                    <li style="margin: 5px !important; color: #000; cursor: pointer; "><input id="@item4.Replace(" ","_")" type="checkbox" class="name" name="name" value="@item4"> @item4</li>
                                                    </label>
                                                    break;
                                                case "Reporte 360°":
                                                    <label style="width: 100%;">
                                                    <li style="margin: 5px !important; color: #000; cursor: pointer; "><input id="@item4.Replace(" ","_").Replace("°","")" type="checkbox" class="name" name="name" value="@item4"> @item4</li>
                                                    </label>
                                                    break;
                                                default:
                                                    <label style="width: 100%;">
                                                    <li style="margin: 5px !important; color: #000; cursor: pointer; "><input type="checkbox" class="name" name="name" value="@item4"> @item4</li>
                                                    </label>
                                                    break;
                                            }/**/
                                            /**/
                                            /**/

                                        }

                                    </ul>
                                </li>
                                <li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu5" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">ESCALA</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu5">
                                        @foreach (var item1 in ViewBag.Escala)
                                        {
                                            <label style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer; "><input type="checkbox" class="name" name="name" value="@item1"> @item1</li>
                                            </label>
                                        }

                                    </ul>
                                </li>
                                <li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu6" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">TERRITORIO</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu6">
                                        @foreach (var item6 in ViewBag.Paises)
                                        {
                                            <label class="territorio" style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer;"><input type="checkbox" class="name" name="name" value="@item6.Split('-')[0]"> @item6.Split('-')[0]</li>
                                            </label>}


                                    </ul>
                                </li>
                                @*<li class="mb-md-3">
                                    <a style="background-color: #B4B4B5; text-decoration: none; " href="#pageSubmenu7" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">PARÁMETRO</a>
                                    <ul class="collapse list-unstyled" id="pageSubmenu7">
                                        @foreach (var item1 in ViewBag.Parametro)
                                        {
                                            <label style="width: 100%;">
                                            <li style="margin: 5px !important; color: #000; cursor: pointer;"><input type="checkbox" class="name" name="name" value="@item1"> @item1</li>
                                            </label>
                                        }

                                    </ul>
                                </li>*@
                            </ul>

                        </div>
                    </nav> 
                </div>
            </div>
            <div class="col-12 col-md-8 overflow-auto mt-md-5">
                <h3 class="text-center"><b>Resultados de busqueda</b> </h3>
                <hr />
                

                    @*<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>*@
                    <script>
                        // Write on keyup event of keyword input element
                        $(document).ready(function () {
                            $("#search").keyup(function () {
                                _this = this;
                                // Show only matching TR, hide rest of them
                                $.each($("#mytable tbody tr"), function () {
                                    if ($(this).text().toLowerCase().indexOf($(_this).val().toLowerCase()) === -1)
                                        $(this).hide();
                                    else
                                        $(this).show();
                                });
                            });
                        });
                    </script>
                    <script>
                        $(document).ready(function () {
                            var nrows = 0; var nres = 0;
                            $("table tr").each(function () {
                                nrows++;
                            })
                            $("#nrows").html(nrows);
                            $(".isres").each(function () {
                                nres++;
                            })
                            $("#nres").html(nres);
                        });
                    </script>

                    <!-- COMIENZO TABLA RESULTADOS -->

                    <h5 id="contar" class="ml-3 mt-4" style="color:black">
                        @*@ViewBag.Resultado.Count resultados*@
                    </h5>

                    <div class="table-responsive" style=" height: 1000px; overflow-x: hidden !important; border-radius: 20px !important; min-width:80%; ">

                        <table id="mytable" class="table" style=" border:none !important;">

                            <thead id="stud_body" style="border:none;">
                                <tr style="border:none;">
                                    <th style="border:none;"></th>
                                </tr>
                            </thead>
                            <tbody id="myTable" class="tablaDatos" style="border: none !important;">
                                @{ int i = 0; }
                                @foreach (var item in ViewBag.Resultado)
                                {
                                    {
                                        i++;
                                    }
                                    <tr>
                                        <td style="border:none !important;">
                                            <div class="row d-flex">
                                                @*<div class="col-md-2 col-12">

                                                    @{ string RutaImagen2 = "/Content/img/iconos_TipoProducto/" + item.TIPO_GRAFICO_id + ".png"; }
                                                    <img class="img-fluid" style="width:140px;" src="@RutaImagen2" />
                                                </div>*@
                                                @*@if (item.TipoGrafico)*@
                                                @*{*@

                                                    <!--<div id="test1" class="col-md-8 col-12">
                                                        <a href="#" type="button" data-toggle="modal" data-target="#myModal2" data-backdrop="True" style="cursor: pointer; text-decoration: blink; color: black;">-->
                                                            @*@item.titulo <br />*@
                                                            @*@item.TIPO_GRAFICO.nom <br />*@
                                                            @*@item.visualizacion*@

                                                            @*<p style="display:none;">@item.TERRITORIO.auxiliar </p>
                                                            <p style="display:none;">@item.TERRITORIO.nombre </p>
                                                            <p style="display:none;">@item.PARAMETRO.nombre </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.nombre </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.INDUSTRIA.nombre  </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.nombre </p>*@
                                                        <!--</a>
                                                        <hr />
                                                    </div>--> @*}*@
                                                @*else if (item.TIPO_GRAFICO_id == 3)
                                                {
                                                    <div id="test1" class="col-md-8 col-12">
                                                        <a href="#" type="button" data-toggle="modal" data-target="#myModal1" data-backdrop="True" style=" cursor: pointer; text-decoration:blink; color:black;">
                                                            @item.titulo <br />
                                                            @item.TIPO_GRAFICO.nombre <br />
                                                            @item.TEMPORALIDAD.nombre
                                                            <p style="display:none;">@item.TERRITORIO.auxiliar </p>
                                                            <p style="display:none;">@item.TERRITORIO.nombre </p>
                                                            <p style="display:none;">@item.PARAMETRO.nombre </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.nombre </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.INDUSTRIA.nombre  </p>
                                                            <p style="display:none;">@item.CATEGORIA.PRODUCTO.nombre </p>
                                                        </a>
                                                    </div> }
                                                else if (item.TIPO_GRAFICO_id < 3)
                                                {*@

                                                    <div id="test1" class="col-md-9 col-12">
                                                        @*<a href="~/info/index?id=@item.id" style=" cursor: pointer;">*@
                                                        <a href="~/AgenciaInformacion/index/@item.id" style="cursor: pointer; text-decoration: blink; color: black;">
                                                            @item.titulo <br />
                                                            @item.pais <br />
                                                            @item.sector


                                                            <p style="display:none;">
                                                                @item.coleccion
                                                            </p>
                                                            <p style="display:none;">
                                                                @item.tema
                                                            </p>
                                                            <p style="display:none;">
                                                                @item.contenido
                                                            </p>
                                                            <p style="display:none;">
                                                                @item.escala
                                                            </p>
                                                            <p style="display:none;">
                                                                @item.territorio
                                                            </p>
                                                            @*<p style="display:none;">*@@*@item.TERRITORIO.auxiliar </p>
        <p style="display:none;">@item.TERRITORIO.nombre </p>
        <p style="display:none;">@item.PARAMETRO.nombre </p>
        <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.nombre </p>
        <p style="display:none;">@item.CATEGORIA.PRODUCTO.SECTOR.INDUSTRIA.nombre  </p>
        <p style="display:none;">@item.CATEGORIA.PRODUCTO.nombre </p>*@
                                                        </a>

                                                    </div>@*}*@

                                                <div class="col-md-2 col-sm-12">
                                                    @*@if (item.TIPO_GRAFICO_id == 4)*@
                                                    @*{*@
                                                        <!--<a class=" btn btn-danger btn-sm" href="#" type="button" data-toggle="modal" data-target="#myModal2" data-backdrop="True" style="border-radius: 25px; font-size: 14px; margin: 0px; width: 100%; cursor: pointer;">
                                                            Adquirir
                                                        </a> }-->
                                                    @*else if (item.TIPO_GRAFICO_id == 3)
                                                    {*@
                                                        <!--<a class=" btn btn-danger btn-sm" href="#" type="button" data-toggle="modal" data-target="#myModal1" data-backdrop="True" style="border-radius: 25px; font-size: 14px; margin: 0px; width: 100%; cursor: pointer;">
                                                            Adquirir
                                                        </a>--> @*}*@
                                                    @*else if (item.TIPO_GRAFICO_id < 3)
                                                    {*@
                                                    
                                                        <a href="~/AgenciaInformacion/index/@item.id" class=" btn btn-danger btn-sm" style="border-radius: 25px; font-size: 14px; margin: 0px; width: 100%; cursor: pointer;">
                                                            Ver Gráfico
                                                        </a>

                                                </div>
                                                <hr />
                                            </div>
                                        </td>

                                    </tr>
                                }
                            </tbody>
                        </table>

                        <!-- Modal3 -->
                        <div class="modal fade" id="myModal1" role="dialog">
                            <div class="modal-dialog modal-lg">

                                <!-- Modal content-->
                                <div class="modal-content" style="background-color:black;">
                                    <div class="modal-header">
                                        <p style="color:white">
                                            Este INFORME INTERACTIVO es posible adquirirlo de dos formas:
                                        </p>
                                        <button type="button" class="close" style="color:white" data-dismiss="modal">&times;</button>

                                    </div>
                                    <div class="modal-body">
                                        <div class="row m-1" style="background-color:white; border-radius: 5px;">
                                            <div class="col-5 p-1">
                                                <div class="col-12">
                                                    <img style="height:80%; width:80%" src="/Content/image_estadistica/logo_informeinteractivo.png" /><br> <br>
                                                </div>
                                                <div class="col-12 ">
                                                    <div class="row">
                                                        <div class="col-5" style="border-right:0.5px solid #b5a7a7; text-align:right ">
                                                            <span> USD </span><span style="color:red; font-size:22px;">10</span>
                                                            pago único
                                                        </div>
                                                        <div class="col-7">
                                                            <form action="https://dataintelligence.store/products/feminicidios-de-mujeres-y-ninas-2016-2019-el-salvador">
                                                                <button class="sub btn btn-danger btn-sm mt-2" style="border-radius:20px; font-size:12px;">
                                                                    Adquirir
                                                                </button>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-7 p-1">
                                                <p style="color:red;"> Con un único pago, puede interactuar  en los filtros activos durante todo 1 año.</p>

                                                <p class="font-weight-bold" style="color:black;"> Incluye:</p>
                                                <ul style="color:black;">
                                                    <li>Descargas en PDF, PNG y Excel.</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="row m-1" style="background-color:white; border-radius:5px; margin-top:2%;">
                                            <div class="col-5 p-1">
                                                <div class="col-12">
                                                    <img style="height:80%; width:80%" src="/Content/image_estadistica/imagenpromocion_2.png" /><br><br><br><br><br><br>
                                                </div>
                                                <div class="col-12 ">
                                                    <div class="row">
                                                        <div class="col-5" style="border-right:0.5px solid #b5a7a7; text-align:right ">
                                                            <span> USD </span><span style="color:red; font-size:22px;">35</span>
                                                            mensuales
                                                        </div>
                                                        <div class="col-7">
                                                            <form action="https://dataintelligence.store/products/feminicidios-de-mujeres-y-ninas-2016-2019-el-salvador">
                                                                <button class="sub btn btn-danger btn-sm mt-2" style="border-radius:20px; font-size:12px;">
                                                                    Adquirir
                                                                </button>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-7 p-1">
                                                <p style="color:red;">
                                                    Cuenta suscripción anual con acceso  la colección completa de los temas de un sector.
                                                </p>
                                                <p class="font-weight-bold" style="color:black;"> Incluye:</p>
                                                <ul style="color:black;">
                                                    <li>Acceso a miles de Gráficos, Mapas interactivos y diagramas.</li>
                                                    <li>Acceso a todos los Informes Interactivos.</li>
                                                    <li>Acceso a Reportes 360º con 30% de descuento.</li>
                                                    <li>Descargas en PDF, PNG y Excel.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer text-center">
                                        <img class="mx-0 pull-left" style="width:35%; height:35%;" src="/Content/img/blanco-trans - copia.png" />
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Modal4 -->
                        <div class="modal fade" id="myModal2" role="dialog">
                            <div class="modal-dialog modal-lg">

                                <!-- Modal content-->
                                <div class="modal-content" style="background-color:black;">
                                    <div class="modal-header">
                                        <p style="color:white">
                                            Este REPORTE 360º es posible adquirirlo de dos formas:
                                        </p>
                                        <button type="button" class="close" style="color:white" data-dismiss="modal">&times;</button>

                                    </div>
                                    <div class="modal-body">
                                        <div class="row m-1" style="background-color:white; border-radius: 5px;">
                                            <div class="col-5 p-1">
                                                <div class="col-12">
                                                    <img style="height:80%; width:80%" src="~/Content/image_estadistica/logo_reporte360.png" /> <br> <br>
                                                </div>
                                                <div class="col-12 ">
                                                    <div class="row">
                                                        <div class="col-5" style="border-right:0.5px solid #b5a7a7; text-align:right ">
                                                            <span> USD </span><span style="color:red; font-size:22px;">200</span>
                                                            pago único
                                                        </div>
                                                        <div class="col-7">
                                                            <form action="https://dataintelligence.store/products/feminicidios-de-mujeres-y-ninas-2016-2019-el-salvador">
                                                                <button class="sub btn btn-danger btn-sm mt-2" style="border-radius:20px; font-size:12px;">
                                                                    Adquirir
                                                                </button>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-7 p-1">
                                                <p style="color:red;"> Con un único pago, puede interactuar  en los filtros activos durante todo 1 año.</p>

                                                <p class="font-weight-bold" style="color:black;"> Incluye:</p>
                                                <ul style="color:black;">
                                                    <li>Descargas en PDF, PNG y Excel.</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="row m-1" style="background-color:white; border-radius:5px; margin-top:2%;">
                                            <div class="col-5 p-1">
                                                <div class="col-12">
                                                    <img style="height:80%; width:80%" src="~/Content/image_estadistica/imagenpromocion_2.png" /><br><br><br><br><br><br>
                                                </div>
                                                <div class="col-12 ">
                                                    <div class="row">
                                                        <div class="col-5" style="border-right:0.5px solid #b5a7a7; text-align:right ">
                                                            <span> USD </span><span style="color:red; font-size:22px;">35</span>
                                                            mensuales
                                                        </div>
                                                        <div class="col-7">
                                                            <form action="https://dataintelligence.store/products/feminicidios-de-mujeres-y-ninas-2016-2019-el-salvador">
                                                                <button class="sub btn btn-danger btn-sm mt-2" style="border-radius:20px; font-size:12px;">
                                                                    Adquirir
                                                                </button>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-7 p-1">
                                                <p style="color:red;">
                                                    Cuenta suscripción anual con acceso  la colección completa de los temas de un sector.
                                                </p>
                                                <p class="font-weight-bold" style="color:black;"> Incluye:</p>
                                                <ul style="color:black;">
                                                    <li>Acceso a miles de Gráficos, Mapas interactivos y diagramas.</li>
                                                    <li>Acceso a todos los Informes Interactivos.</li>
                                                    <li>Acceso a Reportes 360º con 30% de descuento.</li>
                                                    <li>Descargas en PDF, PNG y Excel.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer text-center">
                                        <img class="mx-0 pull-left" style="width:35%; height:35%;" src="~/Content/img/blanco-trans - copia.png" />
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!--script1 para la paginacion-->
                        <script type="text/javascript">
                            Paginador = function (divPaginador, tabla, tamPagina) {
                                this.miDiv = divPaginador; //un DIV donde irán controles de paginación
                                this.tabla = tabla;           //la tabla a paginar
                                this.tamPagina = tamPagina; //el tamaño de la página (filas por página)
                                this.pagActual = 1;         //asumiendo que se parte en página 1
                                this.paginas = Math.floor((this.tabla.rows.length - 1) / this.tamPagina); //¿?

                                this.SetPagina = function (num) {
                                    if (num < 0 || num > this.paginas)
                                        return;

                                    this.pagActual = num;
                                    var min = 1 + (this.pagActual - 1) * this.tamPagina;
                                    var max = min + this.tamPagina - 1;

                                    for (var i = 1; i < this.tabla.rows.length; i++) {
                                        if (i < min || i > max)
                                            this.tabla.rows[i].style.display = 'none';
                                        else
                                            this.tabla.rows[i].style.display = '';
                                    }
                                    this.miDiv.firstChild.rows[0].cells[1].innerHTML = this.pagActual;
                                }

                                this.Mostrar = function () {
                                    //Crear la tabla
                                    var tblPaginador = document.createElement('table');

                                    //Agregar una fila a la tabla
                                    var fil = tblPaginador.insertRow(tblPaginador.rows.length);


                                    //Como ya tengo mi tabla, puedo agregarla al DIV de los controles
                                    this.miDiv.appendChild(tblPaginador);

                                    //¿y esto por qué?
                                    if (this.tabla.rows.length - 1 > this.paginas * this.tamPagina)
                                        this.paginas = this.paginas + 1;

                                    this.SetPagina(this.pagActual);
                                }
                            }
                        </script>
                    </div>

                    <div class="col-md-2 text-center offset-5" style="margin-top:20px;">
                        <button class="btn-danger btn-sm" @*onclick="Paginacion('@ViewBag.palabra');"*@ style=" font-size: 12px; cursor: pointer;">
                            Mostrar más
                        </button>
                    </div>

               
            </div>
        </div>
    </main>

    @*************************final nuevo dise;o pagina busqueda***************************************@
    <script>
        var index = 1;
        function Paginacion(palabra) {

            var id = "parametros de la funcion";
            //$("#PBdos").html("<h1>Hola</h1>")
            //alert(Grafico)
            $.ajax(
                {
                    type: 'POST',
                    //data: "{'id':" + "'" + Grafico + "'}", //datos o parametros enviados al servidor
                    dataType: 'html', //el tipo de dato que nos regresara el servidor en este caso regresa html
                    url: '/info/Paginacion?id=' + palabra + '&id2=' + index,
                    //URL del action result que cargara la vista parcial
                    success: function (result) {
                        // si la funcion se ejecuta lanzara un alert
                        /*alert('Success');*/
                        //cuando se ejecuta bien la funcion agregara al div vistaParcial el contenido
                        //que recibio del servidor
                        $(".tablaDatos").append(result);
                        $("#contar").text($("#myTable tr").length + " Resultados")
                    },

                    error: function (error) {
                        // si hay un error lanzara el mensaje de error
                        alert('Fail');
                    }
                });
            index++;
        }
    </script>
    @* preloader imagen precargado  *@
    <style>
        /*Loading page*/
        .jm-loadingpage {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 999999999;
            background: url(../../Content/img/cargando.gif) center no-repeat rgb(0 0 0 / 0.00);
        }
        /*Loading page*/
    </style>
    <div class="jm-loadingpage"></div>
    <script>
        $(document).ready(function () {
            $(".jm-loadingpage").fadeOut("slow");;
        });
    </script>
    @*fin preloader imagen precargado *@

    <style>
        /*Hover contenido de paginaBusqueda contenido para scrollbar*/
        div.table-responsive:hover {
            overflow-y: auto !important;
        }
        /*Scroll de checkbox de filtros*/
        div.side:hover {
            overflow-y: auto !important;
        }
    </style>
    <div class="container-fluid mb-3">

        <div class="container-fluid">
            <div class="row">

                <div class="col p-4">
                    <!--Boton para ocultar menu-->
                    @*<h2 class="text-center">Resultados de la búsqueda</h2>*@
                    <div class="row justify-content-center borrar">

                        <!-- Comienzo de rsultados de Busqueda -->
                        <div class="col-md-12" id="PBuno">
                            @*<h3 class="text-center mt-md-5">Resultados de la búsqueda</h3>*@
                            <div class="grid search">
                                <div class="grid-body">
                                    <!-- Comienzo de Fila que contiene botón borrar filtro y buscador -->
                                    <div class="row mt-md-3 justify-content-start">

                                        <div class="col-md-2 text-center offset-1 mb-md-2">

                                            @*<button type="button" class="btn btn-secondary" style="border-radius:10px;">Borrar filtro</button>*@
                                            <script type="text/javascript">
                                                function ActivarCasilla(casilla) {
                                                    miscasillas = document.getElementsByTagName('input'); //Rescatamos controles tipo Input
                                                    $("#myTable tr").show();
                                                    $("#contar").text($("#myTable tr").length + " Resultados");
                                                    for (i = 0; i < miscasillas.length; i++) //Ejecutamos y recorremos los controles
                                                    {
                                                        if (miscasillas[i].type == "checkbox") // Ejecutamos si es una casilla de verificacion
                                                        {
                                                            miscasillas[i].checked = false;  //casilla.checked; // Si el input es CheckBox se aplica la funcion ActivarCasilla
                                                        }
                                                    }
                                                }
                                            </script>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FINAL RESULTADOS DE BUSQUEDA -->
                </div>
            </div>
        </div>

    </div>
    @*script3 para la paginacion y selector de filas*@
    <script>
        var table = '#mytable'
        $('#maxRows').on('change', function () {
            /*alert('Hola');*/
            $('.pagination').html('')
            var trnum = 0;
            var maxRows = parseInt($(this).val())
            var totalRows = $(table + ' tbody tr').length
            $(table + ' tr:gt(0)').each(function () {
                trnum++
                if (trnum > maxRows) {
                    $(this).hide()
                }
                if (trnum <= maxRows) {
                    $(this).show()
                }
            })
            if (totalRows > maxRows) {
                var pagenum = Math.ceil(totalRows / maxRows)
                for (var i = 1; i <= pagenum;) {
                    $('.pagination').append('<li class="btn" data-page="' + i + '">\<span>' + i++ + '<span class="page-item  sr-only">(current)</span></span>\</li>').show()
                }
            }

            $('.pagination li:first-child').addClass('active')
            $('.pagination li').on('click', function () {
                var pageNum = $(this).attr('date-page')
                var trIndex = 0;
                $('.pagination li').removeClass('active')
                $(this).addClass('active')
                $(table + ' tr:gt(0)').each(function () {
                    trIndex++
                    if (trIndex > (maxRows * pageNum) || trIndex <= ((maxRows * pageNum) - maxRows)) {
                        $(this).hide()
                    } else {
                        $(this).show()
                    }

                })
            })
        })
        @*
        $(function () {
            $('table tr:eq(0)').prepend('<th>ID</th>')
            var id = 0;
            $('table tr:gt(0)').each(function () {
                id++
                $(this).prepend('<td>' + id + '</td>')
            })
        })
        *@
    </script>
    <script>
        function PBGrafico(Grafico) {
            var id = "parametros de la funcion";
            $('#PBdos').html('<h2>Cargando Información...espere un momento por favor</h2>')

            //$("#PBdos").html("<h1>Hola</h1>")
            //alert(Grafico)
            $.ajax(
                {
                    type: 'POST',
                    data: "{'id':" + "'" + Grafico + "'}", //datos o parametros enviados al servidor
                    dataType: 'html', //el tipo de dato que nos regresara el servidor en este caso regresa html
                    url: '/Data/VisualizarGraficos?id=' + Grafico,
                    //URL del action result que cargara la vista parcial
                    success: function (result) {
                        // si la funcion se ejecuta lanzara un alert
                        /*alert('Success');*/
                        //cuando se ejecuta bien la funcion agregara al div vistaParcial el contenido
                        //que recibio del servidor
                        $("#PBdos").html(result);
                    },

                    error: function (error) {
                        // si hay un error lanzara el mensaje de error
                        $("#PBdos").html('<h2>No pudimos encontrar tu Gráfico, pero a la brevedad estara disponible.</h2>');
                    }

                });

        }

        function PBGrafico2(id) {

            $('#PBcuatro').html('<h2>Cargando Información...espere un momento por favor</h2>')
            //$("#PBdos").html("<h1>Hola</h1>")
            //alert(Grafico)
            $.ajax(
                {
                    type: 'POST',
                    data: "{'id':" + "'" + id + "'}", //datos o parametros enviados al servidor
                    dataType: 'html', //el tipo de dato que nos regresara el servidor en este caso regresa html
                    url: '/info/ContenidoGrafico?id=' + id,
                    //URL del action result que cargara la vista parcial
                    success: function (result) {
                        // si la funcion se ejecuta lanzara un alert
                        /*alert('Success');*/
                        //cuando se ejecuta bien la funcion agregara al div vistaParcial el contenido
                        //que recibio del servidor
                        $("#PBcuatro").html(result);
                    },

                    error: function (error) {
                        // si hay un error lanzara el mensaje de error
                        //alert('Fail PBGrafico2 ContenidoGrafico');
                        $("#PBcuatro").html('<h2>Aun estamos trabajando en mostrar más información sobre este tema.</h2>');
                    }
                });

        }
        function PBGrafico3(id) {

            $('#PBcinco').html('<h2>Cargando Información...espere un momento por favor</h2>')
            //$("#PBdos").html("<h1>Hola</h1>")
            //alert(Grafico)
            $.ajax(
                {
                    type: 'POST',
                    data: "{'id':" + "'" + id + "'}", //datos o parametros enviados al servidor
                    dataType: 'html', //el tipo de dato que nos regresara el servidor en este caso regresa html
                    url: '/info/CarrucelBusqueda?id=' + id,
                    //URL del action result que cargara la vista parcial
                    success: function (result) {
                        // si la funcion se ejecuta lanzara un alert
                        /*alert('Success');*/
                        //cuando se ejecuta bien la funcion agregara al div vistaParcial el contenido
                        //que recibio del servidor
                        $("#PBcinco").html(result);
                    },

                    error: function (error) {
                        // si hay un error lanzara el mensaje de error
                        //alert('Fail PBGrafico3  CarrucelBusqueda');
                        $("#PBcinco").html('<h2>No hemos encontrado gráficos relacionados</h2>');
                    }
                });
        }
    </script>

    @*Jquery, Popper bootstrap.min.js*@

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    @*este script va con la funcion de cargar el gif en la seccion siete*@
    <script>
        $("#contar").text("@i  resultados");
    </script>
    <script>
        function FiltrarII() {
            $("#Informe_Interactivo").prop("checked", true);
            contador = 0;
            name_list = []
            $("#myTable tr").hide()
            var flag = 1
            $("input:checkbox[name=name]:checked").each(function () {
                flag = 0;
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function () {
                    if ($(this).text().toLowerCase().indexOf(value) > -1) {
                        $(this).show();
                        contador++;
                    }
                });
                $("#contar").text(contador + " Resultados");
            });
        }
        function FiltrarReporte360() {


            $("#Reporte_360").prop("checked", true);
            if ($("#Reporte_360").length == 0)
                $("#Informe_Interactivo").prop("checked", true);
            contador = 0;
            name_list = []
            $("#myTable tr").hide()
            var flag = 1
            $("input:checkbox[name=name]:checked").each(function () {
                flag = 0;
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function () {
                    if ($(this).text().toLowerCase().indexOf(value) > -1) {
                        $(this).show();
                        contador++;
                    }
                });
                $("#contar").text(contador + " Resultados");
                if ($("#Reporte_360").length == 0)
                    $("#contar").text("No pudimos encontrar Reportes 360° pero aqui tienes " + contador + " Informes Interactivos");;
            });
        }
    </script>

</body>
</html>

